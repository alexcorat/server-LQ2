<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard - Liquidity Control</title>
  <style>
    body { background:#111; color:#0f0; font-family:monospace; text-align:center; margin:0; padding:0; }
    header { display:flex; align-items:center; justify-content:center; background:#222; border-bottom:2px solid #0f0; padding:15px; z-index:1; }
    header img { height:50px; margin-right:12px; }
    h1 { margin:0; font-size:26px; }

    .dashboard { display:grid; grid-template-columns:repeat(2,1fr); gap:20px; max-width:900px; margin:20px auto; padding:10px; }
    .card { border:2px solid #0f0; border-radius:10px; padding:20px; background:#222; }
    button { background:#0f0; color:#111; font-weight:bold; padding:10px 20px; border:none; border-radius:8px; margin:5px; cursor:pointer; }
    button:disabled { background:#444; color:#777; cursor:not-allowed; }
    button:hover:enabled { background:#1aff1a; }

    .progress-container { width:100%; background:#444; border-radius:8px; margin-top:10px; }
    .progress-bar { width:0%; height:20px; background:yellow; border-radius:8px; text-align:center; color:#111; font-weight:bold; }
    .progress-note { font-size:12px; margin-top:5px; color:#ccc; }
    .log-box { background:#000; color:#0f0; padding:10px; text-align:left; height:200px; overflow-y:auto; border-radius:8px; font-size:14px; white-space:pre; }
    .yellow-text { color:yellow; font-weight:bold; }
    #timeLeft { margin-top:5px; font-size:13px; color:#0f0; }

    /* Fullscreen Matrix */
    #matrixOverlay { position:fixed; top:0; left:0; width:100%; height:100%; background:black; display:none; z-index:9999; }
    #matrixCanvas { width:100%; height:100%; display:block; }

    /* Red Download Bar */
    #matrixTimer { position:absolute; bottom:30px; left:50%; transform:translateX(-50%); width:60%; background:#400; border-radius:5px; overflow:hidden; height:25px; }
    #matrixTimerBar { width:0%; height:100%; background:red; color:#fff; text-align:center; line-height:25px; font-weight:bold; }
  </style>
</head>
<body>
  <header>
    <img src="https://raw.githubusercontent.com/alexcorat/server-LQ2/main/0_1KmG7IlvMvemK93S.jpg" alt="Wallet Logo">
    <h1>Admin Dashboard</h1>
  </header>

  <div class="dashboard">
    <div class="card">
      <h2>Server Control</h2>
      <button id="serverBtn" onclick="activateServer()">Activate Server</button>
      <button id="serverStopBtn" disabled>Deactivate Server</button>
    </div>

    <div class="card">
      <h2>Liquidity Control</h2>
      <button id="liqInjectBtn" disabled onclick="logAction('Liquidity Injected')">Inject Liquidity</button>
      <button id="liqRemoveBtn" disabled onclick="logAction('Liquidity Removed')">Remove Liquidity</button>
    </div>

    <div class="card">
      <h2>Live Liquidity</h2>
      <p><b>Address:</b> <span id="address">---</span></p>
      <p><b>Hash:</b> <span id="hash">---</span></p>
      <p id="balance"><b>Liquidity Server:</b> ---</p>
      <p id="timer"><b>Active Time:</b> <span id="activeTime">---</span></p>
      <p id="speed"><b>Internet Speed:</b> ---</p>
      <button id="balanceBtn" onclick="activateLiquidity()" disabled>Show Balance</button>
      <button id="internetBtn" onclick="testInternet()" disabled>Test Internet</button>
      <div class="progress-container"><div class="progress-bar" id="progressBar">0%</div></div>
      <div id="timeLeft">---</div>
      <div class="progress-note">Waiting for approval based on network speed</div>
    </div>

    <div class="card">
      <h2>Transactions Log</h2>
      <div class="log-box" id="logBox"></div>
    </div>
  </div>

  <div id="matrixOverlay">
    <canvas id="matrixCanvas"></canvas>
    <div id="matrixTimer"><div id="matrixTimerBar">0%</div></div>
  </div>

  <script>
    let matrixInterval, redInterval, progressInterval;
    let startTime, endTime;
    let baseHours = 72;
    let extraHours = 0;
    let internetSpeed = 100;

    function disableControls(state) {
      document.getElementById("liqInjectBtn").disabled = state;
      document.getElementById("liqRemoveBtn").disabled = state;
      document.getElementById("balanceBtn").disabled = state;
      document.getElementById("internetBtn").disabled = state;
      document.getElementById("serverStopBtn").disabled = state;
    }
    disableControls(true);

    function logAction(action) {
      const box = document.getElementById("logBox");
      const time = new Date().toLocaleTimeString();
      box.innerHTML += `[${time}] ${action}\n`;
      box.scrollTop = box.scrollHeight;
    }

    // تست اینترنت
    function testInternet() {
      internetSpeed = Math.floor(Math.random() * (140 - 58 + 1)) + 58;
      document.getElementById("speed").innerHTML = `<b>Internet Speed:</b> ${internetSpeed} MB/s`;
      logAction(`Internet Tested (${internetSpeed} MB/s)`);
    }

    // فعال کردن لیکوئیدیتی
    function activateLiquidity() {
      document.getElementById("balance").innerHTML = "<b>Liquidity Server:</b> 15000 USD";

      extraHours += 10;
      let totalHours = baseHours + extraHours;
      if (internetSpeed > 120) totalHours -= 5;
      else if (internetSpeed < 70) totalHours += 5;

      document.getElementById("activeTime").innerText = totalHours + " hours";
      logAction("Liquidity Activated ("+totalHours+"h)");

      startTimer(totalHours);
    }

    // تایمر واقعی لیکوئیدیتی
    function startTimer(hours) {
      startTime = new Date().getTime();
      endTime = startTime + (hours * 60 * 60 * 1000);
      clearInterval(progressInterval);
      progressInterval = setInterval(updateProgress, 1000);
    }

    function updateProgress() {
      let now = new Date().getTime();
      let percent = ((now - startTime) / (endTime - startTime)) * 100;
      if (percent > 100) percent = 100;

      let bar = document.getElementById("progressBar");
      bar.style.width = percent + "%";
      bar.innerHTML = percent.toFixed(2) + "%";

      let remaining = endTime - now;
      if (remaining < 0) remaining = 0;
      let hrs = Math.floor(remaining / (1000 * 60 * 60));
      let mins = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
      let secs = Math.floor((remaining % (1000 * 60)) / 1000);
      document.getElementById("timeLeft").innerText =
        "Time Left: " + String(hrs).padStart(2,"0") + ":" + String(mins).padStart(2,"0") + ":" + String(secs).padStart(2,"0");

      if (percent >= 100) {
        clearInterval(progressInterval);
        bar.innerHTML = "Finished";
      }
    }

    // اکتیو سرور با ماتریکس + نوار قرمز
    function activateServer() {
      const overlay = document.getElementById("matrixOverlay");
      const canvas = document.getElementById("matrixCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      overlay.style.display = "block";

      const bar = document.getElementById("matrixTimerBar");
      bar.style.width = "0%";
      bar.innerText = "0%";
      let progress = 0;
      clearInterval(redInterval);
      redInterval = setInterval(() => {
        progress = Math.min(progress + 0.833, 100);
        bar.style.width = `${progress}%`;
        bar.innerText = `${Math.floor(progress)}%`;
      }, 1000);

      // نمایش SERVER DARK WEB
      ctx.fillStyle = "#0f0";
      ctx.font = "40px monospace";
      let msg = "SERVER DARK WEB";
      let i = 0;
      const typeInterval = setInterval(() => {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillText(msg.slice(0,i+1), canvas.width/4, canvas.height/2);
        i++;
        if (i === msg.length) {
          clearInterval(typeInterval);
          startFlashMatrix(ctx, canvas);
        }
      }, 200);

      setTimeout(() => {
        clearInterval(matrixInterval);
        clearInterval(redInterval);
        overlay.style.display = "none";
        logAction(">>> Connected to Flash Server");
        disableControls(false);
        document.getElementById("address").innerText = "TKDWCQ9XXXXXXXX";
        document.getElementById("hash").innerText = "a94a8fe5ccb19ba61c4c0873d391e987982fbbd3";
      }, 120000);
    }

    function startFlashMatrix(ctx, canvas) {
      const letters = "FLASH";
      const fontSize = 20;
      const columns = Math.floor(canvas.width / fontSize);
      const drops = Array(columns).fill(1);

      matrixInterval = setInterval(() => {
        ctx.fillStyle = "rgba(0,0,0,0.05)";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = "#0f0";
        ctx.font = `${fontSize}px monospace`;
        drops.forEach((y, x) => {
          const text = letters[Math.floor(Math.random() * letters.length)];
          ctx.fillText(text, x * fontSize, y * fontSize);
          drops[x] = y * fontSize > canvas.height && Math.random() > 0.975 ? 0 : y + 1;
        });
      }, 50);
    }
  </script>
</body>
</html>

