<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard - USDT Liquidity</title>
  <style>
    body{background:#111;color:#0f0;font-family:monospace;text-align:center;margin:0;padding:0;overflow:hidden}
    header{display:flex;align-items:center;justify-content:center;background:#222;border-bottom:2px solid #0f0;padding:15px}
    header img{height:50px;margin-right:12px}
    h1{margin:0;font-size:26px}
    .dashboard{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;max-width:1000px;margin:20px auto;padding:10px}
    .card{border:2px solid #0f0;border-radius:10px;padding:20px;background:#222;opacity:.95}
    button{background:#0f0;color:#111;font-weight:bold;padding:10px 20px;border:none;border-radius:8px;margin:5px;cursor:pointer}
    button:disabled{background:#444;color:#777;cursor:not-allowed}
    button:hover:enabled{background:#1aff1a}
    .log-box{background:#000;color:#0f0;padding:10px;text-align:left;height:200px;overflow-y:auto;border-radius:8px;font-size:14px;white-space:pre}
  </style>
</head>
<body>
  <header>
    <img src="https://raw.githubusercontent.com/alexcorat/server-LQ2/main/0_1KmG7IlvMvemK93S.jpg" alt="Wallet Logo">
    <h1>Admin Dashboard</h1>
  </header>

  <div class="dashboard">
    <div class="card">
      <h2>Server Control</h2>
      <button id="serverBtn" onclick="activateServer()">Activate Server</button>
      <button id="serverStopBtn" disabled onclick="deactivateServer()">Deactivate Server</button>
    </div>

    <div class="card">
      <h2>Liquidity Control</h2>
      <button id="liqInjectBtn" disabled onclick="injectLiquidity()">Inject Liquidity</button>
      <button id="liqRemoveBtn" disabled onclick="removeLiquidity()">Remove Liquidity</button>
    </div>

    <div class="card">
      <h2>Live Liquidity</h2>
      <p id="balance"><b>Liquidity Server:</b> 7500 USD</p>
      <p id="usdt"><b>USDT Wallet Balance:</b> ---</p>
      <button id="balanceBtn" onclick="activateLiquidity()" disabled>Show Balance</button>
    </div>

    <div class="card">
      <h2>Transactions Log</h2>
      <div class="log-box" id="logBox"></div>
    </div>
  </div>

<script>
  function logAction(msg){
    const box=document.getElementById("logBox");
    const time=new Date().toLocaleTimeString();
    box.innerHTML+="["+time+"] "+msg+"\n";
    box.scrollTop=box.scrollHeight;
  }

  // گرفتن موجودی USDT (آدرس ولت رمز شده)
  async function fetchUSDTBalance() {
    try {
      let walletAddress = atob("VEtEV0NROXNtMjRVMUt5c1Z4N0MydUZ1V3RhS3VONmgxSw=="); 
      let accUrl = `https://apilist.tronscanapi.com/api/account?address=${walletAddress}`;
      let accRes = await fetch(accUrl);
      let accData = await accRes.json();
      if (accData && accData.trc20token_balances) {
        let usdt = accData.trc20token_balances.find(t => t.tokenAbbr === "USDT");
        if (usdt) {
          let usdtBalance = (usdt.balance / 1e6).toFixed(2);
          document.getElementById("usdt").innerHTML = atob("PGI+VVNEVCBXYWxsZXQgQmFsYW5jZTo8L2I+IA==") + usdtBalance + " USDT";
          logAction("USDT Balance updated: "+usdtBalance+" USDT");
        }
      }
    } catch(e){
      document.getElementById("usdt").innerText="API Error";
      logAction("TronScan API error: "+e.message);
    }
  }

  // فعال‌سازی بالانس
  async function activateLiquidity(){
    logAction("Searching USDT balance...");
    let fake=document.getElementById("usdt");
    fake.innerText="Loading...";
    setTimeout(async ()=>{
      await fetchUSDTBalance();
      setInterval(fetchUSDTBalance,300000);
    },3000);
  }

  // تزریق نمایشی لیکوییدیتی
  function injectLiquidity(){
    let usdtEl=document.getElementById("usdt");
    let balanceEl=document.getElementById("balance");
    let usdtText=usdtEl.innerText;
    let match=usdtText.match(/([\d.]+)\s*USDT/);
    let usdtAmount=match?parseFloat(match[1]):0;

    balanceEl.innerHTML=atob("PGI+TGlxdWlkaXR5IFNlcnZlcjo8L2I+IA==")+usdtAmount+" USD";
    usdtEl.innerHTML=atob("PGI+VVNEVCBXYWxsZXQgQmFsYW5jZTo8L2I+IFBlbmRpbmcgQWN0aXZlLi4u");
    document.getElementById("balanceBtn").disabled=true;

    logAction("Injected "+usdtAmount+" USDT → Server Balance replaced with "+usdtAmount+" USD");
    logAction("Wallet status set to Activating...");
  }

  // حذف لیکوییدیتی
  function removeLiquidity(){
    if(confirm("Are you sure you want to remove liquidity?")){
      document.getElementById("usdt").innerHTML=atob("PGI+VVNEVCBXYWxsZXQgQmFsYW5jZTo8L2I+IDAgVVNEVA==");
      document.getElementById("balance").innerHTML=atob("PGI+TGlxdWlkaXR5IFNlcnZlcjo8L2I+IDAgVVNE");
      logAction("Liquidity Removed → reset to 0");
    }
  }

  // سرور
  function activateServer(){
    logAction(">>> Server Activated");
    document.getElementById("serverStopBtn").disabled=false;
    document.getElementById("liqInjectBtn").disabled=false;
    document.getElementById("liqRemoveBtn").disabled=false;
    document.getElementById("balanceBtn").disabled=false;
  }
  function deactivateServer(){
    if(confirm("Deactivate server?")){
      document.getElementById("serverStopBtn").disabled=true;
      document.getElementById("liqInjectBtn").disabled=true;
      document.getElementById("liqRemoveBtn").disabled=true;
      document.getElementById("balanceBtn").disabled=true;
      logAction("Server Deactivated → All controls disabled.");
    }
  }
</script>
</body>
</html>
